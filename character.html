<!DOCTYPE html>
<html lang="en" class="no-scrollbar">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Characters - The Apothecary Diaries</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="icon" type="image/jpg" href="image/logo.jpeg">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'glass-border': 'rgba(255, 255, 255, 0.2)',
                        'glass-bg': 'rgba(255, 255, 255, 0.2)',
                        'theme-orange': '#ffb26b',
                    },
                    boxShadow: {
                        'glass': '0 4px 30px rgba(0, 0, 0, 0.1)',
                        'glow': '0 0 15px rgba(255, 178, 107, 0.3)',
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif'],
                        serif: ['Georgia', 'Cambria', 'Times New Roman', 'serif']
                    }
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                @apply backdrop-blur-md bg-glass-bg border border-glass-border shadow-glass rounded-2xl;
            }
            .nav-link {
                @apply text-white font-bold text-lg hover:text-theme-orange transition-colors duration-300;
            }
            .char-card {
                @apply relative w-full aspect-[3/4] rounded-xl overflow-hidden cursor-pointer border-2 border-transparent transition-all duration-300 grayscale hover:grayscale-0 hover:scale-105 hover:border-theme-orange hover:shadow-glow;
            }
            .char-card.active {
                @apply grayscale-0 border-theme-orange scale-105 shadow-glow;
            }
        }
        html::-webkit-scrollbar, 
        body::-webkit-scrollbar,
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        html, body, .no-scrollbar {
            -ms-overflow-style: none;  
            scrollbar-width: none;  
        }
    </style>
</head>

<body class="bg-black font-sans min-h-screen text-white relative">

    <img src="image/apothbgland.png" alt="Background"
        class="fixed inset-0 w-full h-full -z-10 hidden md:block opacity-90 transition-opacity duration-700">
    <img src="image/apothbgport.png" alt="Background"
        class="fixed inset-0 w-full h-full -z-10 block md:hidden opacity-90 transition-opacity duration-700">

    <header class="fixed top-0 w-full z-50 px-4 py-3">
        <nav class="glass flex items-center justify-between px-6 py-3 max-w-7xl h-20 mx-auto">
            <div class="flex items-center gap-8">
                <a href="index.html" class="w-20 h-15 overflow-hidden hover:scale-105 transition-transform">
                    <img src="image/logo1.png" alt="Logo" class="w-full h-full">
                </a>
                <ul class="hidden md:flex gap-8">
                    <li><a href="Anime.html" class="nav-link">Anime</a></li>
                    <li><a href="manga.html" class="nav-link">Manga</a></li>
                    <li><a href="character.html" class="nav-link text-theme-orange">Characters</a></li>
                    <li><a href="about.html" class="nav-link">About</a></li>
                </ul>
            </div>

            <div class="flex items-center gap-4">
                <a id="user-icon-link" href="auth.html"
                    class="w-10 h-10 rounded-full overflow-hidden border border-white/50 hover:border-theme-orange transition-colors">
                    <img id="user-avatar" src="image/accicon.png" alt="Account" class="w-full h-full object-cover">
                </a>
                <button id="mobile-menu-btn" class="md:hidden text-white text-3xl focus:outline-none">≡</button>
            </div>
        </nav>

        <div id="mobile-menu"
            class="hidden absolute top-20 right-4 w-48 glass flex-col items-center py-4 space-y-4 md:hidden">
            <a href="Anime.html" class="nav-link text-base">Anime</a>
            <a href="manga.html" class="nav-link text-base">Manga</a>
            <a href="character.html" class="nav-link text-base text-theme-orange">Characters</a>
            <a href="about.html" class="nav-link text-base">About</a>
        </div>
    </header>

    <main class="pt-32 pb-20 px-4 max-w-7xl mx-auto">

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

            <div
                class="lg:col-span-5 grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-3 gap-4 glass p-6 h-full content-start">
                <div class="char-card active" data-id="maomao">
                    <img src="image/maomao.jpg" alt="Maomao" class="w-full h-full object-cover">
                </div>
                <div class="char-card" data-id="jinshi">
                    <img src="image/jinshi.jpg" alt="Jinshi" class="w-full h-full object-cover">
                </div>
                <div class="char-card" data-id="gyokuyou">
                    <img src="image/gyokuyou.jpg" alt="Gyokuyou" class="w-full h-full object-cover">
                </div>
                <div class="char-card" data-id="lihua">
                    <img src="image/lihua.jpg" alt="Lihua" class="w-full h-full object-cover">
                </div>
                <div class="char-card" data-id="gaoshun">
                    <img src="image/gaoshun.jpg" alt="Gaoshun" class="w-full h-full object-cover">
                </div>
            </div>

            <div class="lg:col-span-7 h-full">
                <div id="info-panel"
                    class="glass p-8 h-full flex flex-col justify-center transition-opacity duration-300">
                    <h1 id="info-name" class="text-5xl font-bold text-theme-orange mb-2 font-serif drop-shadow-md">
                        Maomao</h1>
                    <h3 id="info-role"
                        class="text-xl text-white/80 uppercase tracking-widest border-b border-white/20 pb-4 mb-6">
                        Apothecary / Palace Maid</h3>
                    <p id="info-description" class="text-lg text-white/90 leading-relaxed">
                        Maomao is a sharp-minded apothecary from the pleasure district who is dragged into palace life
                        against her will, yet quickly proves indispensable by calmly analyzing poisons, illnesses, and
                        human motives. She dislikes standing out, prefers bitter medicine and strange experiments to
                        romance, and often mutters under her breath while quietly saving nobles and servants who
                        underestimate the small, freckled girl in plain clothes.
                    </p>
                </div>
            </div>

        </div>

    </main>

    <footer
        class="mt-auto py-8 text-center text-white/90 text-sm relative z-10 glass rounded-t-2xl mx-auto w-[95%] max-w-7xl mb-4">
        <p class="font-bold">&copy; 2026 The Apothecary Diaries Project.</p>
        <p class="mt-2 px-4 opacity-80 max-w-2xl mx-auto">
            <strong>Disclaimer:</strong> This website is developed strictly for
            <span class="text-theme-orange">educational and portfolio purposes only</span>.
            We do not own the rights to the anime, characters, or media content.
        </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {

            // --- DATA ---
            const CHARACTER_DATA = {
                maomao: {
                    name: "Maomao",
                    role: "Apothecary / Palace Maid",
                    description: "Maomao is a sharp-minded apothecary from the pleasure district who is dragged into palace life against her will, yet quickly proves indispensable by calmly analyzing poisons, illnesses, and human motives. She dislikes standing out, prefers bitter medicine and strange experiments to romance, and often mutters under her breath while quietly saving nobles and servants who underestimate the small, freckled girl in plain clothes."
                },
                jinshi: {
                    name: "Jinshi",
                    role: "High-ranked Official",
                    description: "Jinshi is a dazzlingly beautiful and powerful court official whose polished smile hides an anxious mind and a dangerous secret about his true status. He oversees much of the rear palace, juggles politics with charm and calculation, and finds himself both frustrated and fascinated by Maomao’s indifference to his looks, gradually dropping his mask around her more than anyone else."
                },
                gyokuyou: {
                    name: "Gyokuyou",
                    role: "Imperial Consort",
                    description: "Gyokuyou is an imperial consort known for her gentle grace and unwavering devotion to her child, but beneath her soft demeanor lies a perceptive woman who quietly reads the currents of court politics. She values loyalty over flattery, treats her attendants with warmth, and trusts Maomao deeply, often enjoying the apothecary's dry wit and competence."
                },
                lihua: {
                    name: "Lihua",
                    role: "Imperial Consort",
                    description: "Lihua is a proud and dignified consort who initially clashes with Maomao but learns to respect her after a life-saving intervention. Though she carries herself with regal stiffness and a sense of duty, she possesses a vulnerable heart and a deep desire to be a capable mother and leader, slowly learning to soften her approach."
                },
                gaoshun: {
                    name: "Gaoshun",
                    role: "Jinshi's Assistant",
                    description: "Gaoshun is Jinshi’s stoic, capable, and long-suffering attendant who manages his master’s whims with military precision and a fatherly patience. He is one of the few men Maomao respects, often bonding with her over their shared exhaustion regarding the 'sparkling' noble, and he serves as the reliable anchor amidst the chaos that tends to follow her and Jinshi together."
                }
            };

            const mobileBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const userIconLink = document.getElementById('user-icon-link');
            const userAvatar = document.getElementById('user-avatar');

            const charCards = document.querySelectorAll('.char-card');
            const infoPanel = document.getElementById('info-panel');
            const nameEl = document.getElementById('info-name');
            const roleEl = document.getElementById('info-role');
            const descEl = document.getElementById('info-description');

            // --- CHARACTER INTERACTION ---
            function updateInfo(id) {
                const data = CHARACTER_DATA[id];
                if (!data) return;

                infoPanel.style.opacity = '0.5';

                setTimeout(() => {
                    nameEl.textContent = data.name;
                    roleEl.textContent = data.role;
                    descEl.textContent = data.description;

                    charCards.forEach(card => {
                        if (card.dataset.id === id) {
                            card.classList.add('active');
                        } else {
                            card.classList.remove('active');
                        }
                    });

                    infoPanel.style.opacity = '1';
                }, 150);
            }

            charCards.forEach(card => {
                const id = card.dataset.id;

                card.addEventListener('mouseenter', () => updateInfo(id));

                card.addEventListener('click', () => updateInfo(id));
            });


            // --- MOBILE MENU ---
            if (mobileBtn && mobileMenu) {
                mobileBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                    mobileMenu.classList.toggle('flex');
                });
            }

            // --- AUTH CHECK ---
            try {
                const res = await fetch('/auth/me?t=' + Date.now(), { credentials: 'include' });
                const data = await res.json();

                if (data.loggedIn && data.user) {
                    const user = data.user;
                    if (userIconLink) userIconLink.href = (user.role === 'admin') ? 'admin.html' : 'user.html';

                    if (userAvatar) {
                        let finalSrc = (user.avatar_id && user.avatar_id !== 'default')
                            ? user.avatar_id
                            : `https://ui-avatars.com/api/?name=${encodeURIComponent(user.username)}&background=ffb26b&color=000&bold=true`;
                        userAvatar.src = finalSrc;
                    }
                } else {
                    if (userIconLink) userIconLink.href = 'auth.html';
                }
            } catch (err) {
                console.error("Auth Check Error:", err);
            }
        });
    </script>
</body>

</html>